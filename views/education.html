{{block "educationSection" .}}
<div>
  <div class="flex items-center gap-1">
    <span class="text-white text-xl font-medium">Formación</span>
    {{if .Owner}}
    <button 
      onclick="edForm.showModal()"
      class="flex items-center justify-center w-7 h-7 rounded-full hover:bg-green-700 transition-colors duration-200"
      type="button"
      aria-label="Añadir habilidad"
    >
      <img 
        src="/public/plus.svg" 
        alt="Añadir" 
        width="16" 
        height="16"
        class="pointer-events-none"
      />
    </button>
  </div>
  {{template "educationForm" .}}
  {{else}}
  </div>
  {{end}}
  {{template "educationList" .}}
</div>
{{end}}

{{block "educationEntry" .}}
<li id="education_{{.ID}}" class="mb-10 ms-4">
  <div class="absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -start-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"></div>
  <span class="mb-1 text-sm font-normal leading-none text-gray-500">{{.StartDate}} - {{.EndDate}}</span>
  <h3 class="text-lg font-semibold text-gray-400">{{.Degree}}</h3>
  <span class="mb-4 text-base font-normal text-gray-500 dark:text-gray-400">{{.Institution}}</span>
  <button 
    hx-delete="/education/{{.ID}}" 
    hx-target="#education_{{.ID}}"
    hx-swap="delete"
    class="flex items-center justify-center w-7 h-7 rounded-full hover:bg-red-400 transition-colors duration-200">
      <img src="/public/delete.svg" alt="delete icon" width="16" height="16" style="pointer-events: none" />
  </button>
</li>
{{end}} 

{{block "simpleEducation" .}}
<li id="education_{{.ID}}" class="mb-10 ms-4">
  <div class="absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -start-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"></div>
  <span class="mb-1 text-sm font-normal leading-none text-gray-500">{{.StartDate}} - {{.EndDate}}</span>
  <h3 class="text-lg font-semibold text-gray-400">{{.Degree}}</h3>
  <span class="mb-4 text-base font-normal text-gray-500 dark:text-gray-400">{{.Institution}}</span>
</li>
{{end}} 

{{block "educationList" .}} 
<ol id="education_list" class="relative border-s border-gray-200 dark:border-gray-700">                  
  {{if .Owner}}
  {{range .Education}} {{template "educationEntry" .}} {{end}}
  {{else}}
  {{range .Education}} {{template "simpleEducation" .}} {{end}}
  {{end}}
</ol>
{{if not .Education}}
<span class="text-shark-200" id="empty-ed">Sin registrar</span>
{{end}} 
{{end}} 

{{block "educationForm" .}}
<dialog id="edForm" class="bg-transparent backdrop:bg-shark-950/80">
  <div class="fixed inset-0 flex items-center justify-center">
    <form 
      hx-post="/education" 
      hx-target="#education_list" 
      hx-swap="afterbegin"
      class="relative grid grid-cols-1 md:grid-cols-2 gap-6 bg-shark-900 rounded-lg p-6 shadow-xl border border-shark-700 max-w-2xl w-full"
    >
      <button 
        type="button" 
        class="absolute top-2 right-2 w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-400 transition-colors duration-200" 
        onclick="edForm.close()">
        <img src="/public/x.svg" alt="close" width="16" height="16" class="pointer-events-none">
      </button>
    
      <div class="flex flex-col gap-2">
        <label for="ed-degree" class="text-shark-200 font-medium">Título</label>
        <input 
          id="ed-degree" 
          class="border border-shark-700 rounded-lg p-3 bg-shark-800 text-shark-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" 
          type="text" 
          name="degree" 
          placeholder="Ejemplo: Licenciatura en Ciencias"
        />
        <span id="ed-degree-error" class="text-red-400 text-sm"></span>
      </div>
      <div class="flex flex-col gap-2">
        <label for="ed-institution" class="text-shark-200 font-medium">Institución</label>
        <input 
          id="ed-institution" 
          class="border border-shark-700 rounded-lg p-3 bg-shark-800 text-shark-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" 
          type="text" 
          name="institution" 
          placeholder="Ejemplo: Universidad Nacional"
        />
        <span id="ed-institution-error" class="text-red-400 text-sm"></span>
      </div>
      <div class="flex flex-col gap-2">
        <label for="ed-start" class="text-shark-200 font-medium">Fecha de inicio</label>
        <input 
          id="ed-start" 
          class="border border-shark-700 rounded-lg p-3 bg-shark-800 text-shark-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" 
          type="month" 
          name="start" 
        />
        <span id="ed-start-error" class="text-red-400 text-sm"></span>
      </div>
      <div class="flex flex-col gap-2">
        <label for="ed-end" class="text-shark-200 font-medium">Fecha de fin (opcional)</label>
        <input 
          id="ed-end" 
          class="border border-shark-700 rounded-lg p-3 bg-shark-800 text-shark-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" 
          type="month" 
          name="end" 
        />
        <span id="ed-end-error" class="text-red-400 text-sm"></span>
      </div>
      <div class="md:col-span-2 flex justify-end">
        <button
          class="px-4 py-2 bg-shark-700 text-shark-200 font-medium rounded-lg hover:bg-shark-600 transition-colors duration-200 flex items-center justify-center gap-2"
          type="submit"
        >
          <img src="/public/plus.svg" alt="add" width="16" height="16" class="pointer-events-none">
          <span>Agregar</span>
        </button>
      </div>
    </form>
  </div>
</dialog>
{{end}}

{{block "edErrors" .}}
<div id="ed-degree-error" hx-swap-oob="innerHTML">{{.DegreeError}}</div>
<div id="ed-institution-error" hx-swap-oob="innerHTML">{{.InstitutionError}}</div>
<div id="ed-start-error" hx-swap-oob="innerHTML">{{.StartError}}</div>
<div id="ed-end-error" hx-swap-oob="innerHTML">{{.EndError}}</div>
{{end}}
