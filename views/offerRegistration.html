{{block "offerRegistration" .}}
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title></title>
  <link href="/static/output.css" rel="stylesheet" />
  <script src="/static/htmx.min.js"></script>
</head>

<body class="bg-shark-950">
  {{template "navBar" .User}}

  <div class="flex flex-row justify-center">
    <div class="w-1/2 flex flex-col gap-4">
      {{if .Offers}}
      <div class="flex flex-col gap-4">
        <h2 class="text-shark-200">Ofertas</h2>
        <div class="flex flex-col gap-4">
          {{range .Offers}}
          <div class="flex flex-col gap-4 p-4 border border-shark-900 rounded">
            <div>
              <span class="text-shark-200 cursor-pointer hover:underline hover:underline-offset-1" {{if eq .Status 0}}
                hx-get="/offers/{{.ID}}" {{else}} hx-get="/preamble/{{.ID}}" {{end}} hx-trigger="click"
                hx-push-url="true" hx-target="body">
                {{.Title}}
              </span>
              <span class="text-shark-400">
                {{if eq .Status 0}} Pendiente {{else if eq .Status 1}}
                Publicada {{else}} Finalizada {{end}}
              </span>
            </div>
          </div>
          {{end}}
        </div>
      </div>
      {{end}}
      <form id="offer-form" class="flex flex-col gap-4 p-4 border border-shark-900 rounded" hx-post="/register/offers"
        hx-target="#offer-form-errors">
        <div class="flex gap-4">
          <div class="w-1/2">
            <label for="f-title" class="text-shark-200">Título</label>
            <input id="f-title" type="text" name="title" class="rounded block w-full" />
            <span id="f-title-error" class="text-red-500 text-sm"></span>
          </div>
          <div class="w-1/2">
            <label for="f-companies" class="text-shark-200">Empresa</label>
            <select id="f-companies" name="companyID" class="rounded block w-full">
              {{range .Companies}}
              <option value="{{.ID}}">{{.Name}}</option>
              {{end}}
            </select>
            <span id="f-company-error" class="text-red-500 text-sm"></span>
          </div>
        </div>

        <div>
          <div class="flex gap-4">
            <div class="w-1/2">
              <label for="f-min-wage" class="text-shark-200">Salario mínimo</label>
              <input id="f-min-wage" type="number" name="minWage" class="rounded block w-full" />
            </div>
            <div class="w-1/2">
              <label for="f-max-wage" class="text-shark-200">Salario máximo</label>
              <input id="f-max-wage" type="number" name="maxWage" class="rounded block w-full" />
            </div>
          </div>
          <span id="f-wage-error" class="block text-center text-red-500 text-sm"></span>
        </div>

        <div>
          <label for="f-description" class="text-shark-200">Descripción</label>
          <textarea id="f-description" name="description" class="auto-resize-textarea w-full rounded"></textarea>
          <span id="f-description-error" class="text-red-500 text-sm"></span>
        </div>

        <button type="submit" class="bg-shark-700 text-white rounded p-2">
          Crear
        </button>
      </form>
      <div id="offer-form-errors"></div>
    </div>
  </div>
</body>

</html>
{{end}} {{block "offerFormErrors" .}}
<div></div>
<span id="f-title-error" hx-swap-oob="innerHTML">{{.TitleError}}</span>
<span id="f-company-error" hx-swap-oob="innerHTML">{{.CompanyIDError}}</span>
<span id="f-wage-error" hx-swap-oob="innerHTML">{{.WageError}}</span>
<span id="f-description-error" hx-swap-oob="innerHTML">{{.DescriptionError}}</span>
{{end}}
