{{block "companyList" .}}
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Companies</title>
  <link href="/static/output.css" rel="stylesheet" />
  <script src="/static/htmx.min.js"></script>
  <script src="/static/head-support.js"></script>
</head>

<body class="" hx-ext="head-support">
  <section class="bg-gradient-to-b from-shark-950 to-shark-900 min-h-screen flex flex-col font-mono">
    {{template "navBar" .User}}

    <div class="flex justify-center overflow-y-auto mt-8 mb-8">
      <div class="w-full max-w-4xl flex flex-col gap-8">
        <form id="company-filters" hx-get="/companies" hx-target="body" hx-boost="true" hx-push-url="true"
          class="flex flex-col sm:flex-row gap-4 items-center justify-center drop-shadow-lg">
          <div class="relative w-full sm:max-w-md">
            <span class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <img src="/public/find.svg" width="20" height="20" alt="search" class="text-shark-200" />
            </span>
            <input id="f-query" type="text" name="q"
              class="bg-white ps-10 py-2 rounded-lg text-black block w-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 transition placeholder-gray-400"
              placeholder="Buscar compañías..."
              {{if .CmpSearch}} value="{{.CmpSearch}}" {{end}}
            />
          </div>
        </form>
        {{if not .Companies}}
        <span class="block text-center text-shark-300 text-base mt-8 mb-8 italic">Ninguna coincidencia</span>
        {{else}}
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          {{range .Companies}}
          {{template "companyEntry" .}}
          {{end}}
        </div>
        {{end}}
      </div>
    </div>
  </section>
</body>

</html>
{{end}}

{{block "companyEntry" .}}
<div class="group flex flex-col truncate gap-2 bg-shark-800/70 border border-shark-900 rounded-2xl p-6 cursor-pointer shadow-sm transition-all duration-300 hover:border-blue-400 hover:shadow-lg hover:-translate-y-1 active:scale-[0.99]"
  hx-get="/companies/{{.ID}}" hx-trigger="click" hx-push-url="true" hx-target="body">
  <img {{if .ImageURL}}src="{{.ImageURL}}"{{else}}src="/public/company.svg"{{end}}
    class="w-1/2 h-auto border border-gray-700 aspect-square rounded-full mx-auto object-cover transition-all duration-300 group-hover:border-white" alt="avatar" />
  <div>
    <span class="text-white font-bold text-xl truncate text-center">{{.Name}}</span>
  </div>
</div>
{{end}}
