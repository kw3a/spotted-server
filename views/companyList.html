{{block "companyList" .}}
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Companies</title>
  <link href="/static/output.css" rel="stylesheet" />
  <script src="/static/htmx.min.js"></script>
  <script src="/static/head-support.js"></script>
</head>

<body class="" hx-ext="head-support">
  <section class="bg-shark-950 h-screen flex flex-col font-mono">
    {{template "navBar" .User}}

    <div class="flex justify-center p-4 overflow-y-auto">
      <div class="w-full max-w-4xl flex flex-col gap-4 px-4">
        <form id="company-filters" hx-get="/companies" hx-target="body" hx-boost="true" hx-push-url="true"
          class="flex flex-col sm:flex-row gap-4 items-center justify-center">
          <div class="relative w-full sm:max-w-md">
            <span class="absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none">
              <img src="/public/find.svg" width="20" height="20" alt="search" class="text-shark-200" />
            </span>
            <input id="f-query" type="text" name="q"
              class="rounded bg-gray-700 text-shark-200 block w-full pl-10 p-2 focus:outline-none focus:ring focus:ring-blue-500"
              placeholder="Buscar..." />
          </div>
        </form>
        {{if not .Companies}}
        <span class="text-white text-center">Ninguna coincidencia</span>
        {{else}}
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 m-4">
          {{range .Companies}}
          {{template "companyEntry" .}}
          {{end}}
        </div>
        {{end}}
      </div>
    </div>
  </section>
</body>

</html>
{{end}}

{{block "companyEntry" .}}
<div class="flex flex-col gap-2 border border-shark-900 rounded p-8 hover:border-shark-700 cursor-pointer overflow-hidden"
  hx-get="/companies/{{.ID}}" hx-trigger="click" hx-push-url="true" hx-target="body">
  <img {{if .ImageURL}}src="{{.ImageURL}}"{{else}}src="/public/company.svg"{{end}}
    class="w-1/2 h-auto border-2 border-white aspect-square rounded-full mx-auto object-cover" alt="avatar" />
  <div>
    <span class="text-shark-200 font-semibold text-xl truncate">{{.Name}}</span>
  </div>
</div>
{{end}}