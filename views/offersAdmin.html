{{block "offersAdmin" .}}
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Document</title>
  <script src="/static/htmx.min.js"></script>
  <link href="/static/output.css" rel="stylesheet" />
  <script src="/static/head-support.js"></script>
</head>

<body class="bg-shark-950" hx-ext="head-support">
  {{template "navBar" .User}}
  <div class="flex flex-row p-4 justify-center">
    <div class="w-1/2 flex flex-col gap-4">
      <span class="text-white text-center text-xl"> Mis publicaciones </span>
      {{if not .Offers}}
      <span class="text-white text-center"> Ninguna coincidencia </span>
      {{else}}
      <div class="grid grid-cols-2 gap-4 m-4">
        {{range .Offers}} {{template "offerAdminCard" .}} {{end}}
      </div>
      {{end}}
    </div>
  </div>
</body>
</html>
{{end}} 

{{block "offerAdminCard" .}} 
{{if eq .Status 1}}
<div class="flex flex-col gap-2 border border-shark-900 rounded p-8">
  <div class="relative">
    <div class="absolute top-0 right-0">
      <div class="relative group inline-block">
        <button hx-patch="/offers/archive/{{.ID}}" hx-confirm="EstÃ¡s seguro de que quieres archivar esta oferta?">
          <img src="/public/archive.svg" alt="delete icon" width="20" height="20" style="pointer-events: none" />
        </button>
        <span
          class="absolute right-1/2 translate-x-1/2 -top-8 px-2 py-1 text-xs text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap">
          Archivar
        </span>
      </div>
    </div>
  </div>
{{else}}
<div class="flex flex-col gap-2 border border-shark-900 rounded p-8 opacity-50 ">
{{end}}
  <div class="flex items-center gap-2">
    <img class="border border-white"
      {{if .CompanyImageURL}}
      src="{{.CompanyImageURL}}" 
      {{else}}
      src="/public/user.svg"
      {{end}}
      width="20" height="20" />
    <p class="truncate text-shark-200 font-semibold hover:underline hover:underline-offset-1 cursor-pointer"
      hx-get="/companies/{{.CompanyID}}" hx-boost="true" hx-push-url="true" hx-target="body">
      {{.CompanyName}}
    </p>
  </div>
  <div>
    <p class="truncate text-shark-200 text-xl hover:underline hover:underline-offset-1 cursor-pointer"
      hx-get="/preamble/{{.ID}}" hx-trigger="click" hx-push-url="true" hx-target="body">
      {{.Title}}
    </p>
  </div>
  <div class="flex justify-between">
    <span class="text-yellow-100">{{.MinWage}}$ - {{.MaxWage}}$</span>
    <span class="text-shark-300 font-light">{{.RelativeTime}}</span>
  </div>
</div>
{{end}}
